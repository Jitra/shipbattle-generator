/*! board-generator - 1.0.39 */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("BoardGenerator",[],n):"object"==typeof exports?exports.BoardGenerator=n():e.BoardGenerator=n()}("undefined"!=typeof self?self:this,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/lib",t(t.s=0)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BoardGenerator",{enumerable:!0,get:function(){return r.BoardGenerator}});var r=t(1)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BoardGenerator=void 0;var r,o=(r=t(2))&&r.__esModule?r:{default:r};var i=function(){return function(){var e,n=0,t={};e||((e=new o.default).onmessage=function(e){e.data.errors?t[e.data.msgId].reject({message:"Could not create map"}):t[e.data.msgId].resolve(e.data.board.fields)}),this.randomMap=function(r,o,i){return function(r){var o="msg"+n++;return t[o]={resolve:void 0,reject:void 0},r.msgId=o,e.postMessage(r),new Promise(function(e,n){t[o].resolve=e,t[o].reject=n})}({type:"ADD_SHIPS",payload:{ships:i,board:function(e,n){for(var t={fields:[],minX:1,minY:1,maxX:e,maxY:n},r=t.minY;r<=n;r++)for(var o=t.minX;o<=e;o++)t.fields.push({hit:!1,x:o,y:r,ship:null});return t}(r,o)}})},this.ship=function(e,n){return{name:e,compartments:n}}}}();n.BoardGenerator=i},function(e,n,t){e.exports=function(){return t(3)('/*! board-generator - 1.0.39 */!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/lib",t(t.s=0)}([function(e,n){function t(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r={getRandomFreeField:function(e,n){var t=e.fields.filter(function(e){return!e.ship&&!e.marked});if(t.length<n)throw new Error("Not enough empty fields");var r=t[Math.floor(Math.random()*(t.length-1))];return this.markChecked([r]),r},markChecked:function(e){e.forEach(function(e){return e.marked=!0})},unmarkChecked:function(e){e.forEach(function(e){return delete e.marked})},calculateHorizontal:function(e,n){var t,r,i,o=this,a=[],u=function(){a=[];var u=o.getRandomFreeField(n,e);r=(r=u.x-e)>=n.minX?r:n.minX,i=(i=u.x+e)<=n.maxX?i:n.maxX,r=i===n.maxX?r-1:r,i=r===n.minX?i+1:i,t=2;for(var c=function(e){var t=n.fields.findIndex(function(n){return n.x===e&&n.y===u.y-1}),r=n.fields.findIndex(function(n){return n.x===e&&n.y===u.y&&!n.ship}),i=n.fields.findIndex(function(n){return n.x===e&&n.y===u.y+1});if(-1===r||-1!==t&&n.fields[t].ship||-1!==i&&n.fields[i].ship)return o.markChecked(a),a=[],"continue";a.push(n.fields[r])},f=r;f<=i&&a.length!==e+t;f++)c(f)};do{u()}while(a.length<e+t);return a=a[0].x===n.minX?a.slice(0,a.length-t):a[a.length-1].x===n.maxX?a.slice(t):a.slice(1,a.length-1)},calculateVertical:function(e,n){var t,i=function(){var i=r.getRandomFreeField(n,e),o=n.fields.filter(function(e){return e.x===i.x}).sort(function(e,n){return e.y-n.y});t=[];for(var a=function(e){var r=n.fields.findIndex(function(n){return n.y===o[e].y&&n.x===i.x-1}),a=n.fields.findIndex(function(n){return n.y===o[e].y&&n.x===i.x+1});o[e].ship||-1!==r&&n.fields[r].ship||-1!==a&&n.fields[a].ship?t=[]:t.push(o[e])},u=n.minY-1;u<n.maxY-1&&t.length<e+2;u++)a(u)};do{i()}while(t.length<e+2);return t=t[0].y===n.minY?t.slice(0,t.length-2):t[t.length-1].y===n.maxY?t.slice(2):t.slice(1,t.length-1)}};onmessage=function(e){var n,i=e.data,o=i.type,a=i.msgId,u=i.payload,c=u.ships,f=u.board;switch(o){case"ADD_SHIPS":try{!function(e,n){var i=e.sort(function(e,n){return e.compartments-n.compartments}),o=[],a=0;do{try{for(var u=function(i){var a=[];(a=Math.floor(2*Math.random())?r.calculateHorizontal(e[i].compartments,n):r.calculateVertical(e[i].compartments,n)).forEach(function(n){return n.ship={...e[i],id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})}}),o.push.apply(o,t(a)),r.unmarkChecked(n.fields)},c=i.length-1;c>0;c--)u(c);break}catch(e){a++,o.forEach(function(e){return delete e.ship})}}while(a<7);if(7===a)throw new Error("Too much tries")}(c,f)}catch(e){n=e.toString()}postMessage({msgId:a,errors:n,board:f})}}}]);',t.p+"5ad19ddb6e0eb1b3bdc5.worker.js")}},function(e,n,t){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,n){try{try{var t;try{(t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),t=t.getBlob()}catch(n){t=new Blob([e])}return new Worker(r.createObjectURL(t))}catch(n){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!n)throw Error("Inline worker is not supported");return new Worker(n)}}}])});